-- 05_clients_workers_from_index2.sql
-- זרע לקוחות ועובדים מחולצים מתוך index2.html
-- Idempotent: לא יוצר כפילויות קיימות

-- לקוחות (trim בוצע ידנית להסרת רווחים עודפים)
WITH src(name) AS (
    VALUES
        ('שמוליק'),
        ('החץ הבונה'),
        ('דמה'),
        ('הבית החכם LOG-IN'),
        ('מוצרי חשמל רבי'),
        ('עמי שרותי חשמל'),
        ('ע.מ.ו. בניה'),
        ('אל אר פרוייקטים'),
        ('גצלר ביקסנשפנר'),
        ('א.מ.רון'),
        ('פסגות'),
        ('א.ש.ירושלמי'),
        ('חשמל הרצל'),
        ('אלישיר עבודות חשמל'),
        ('א.ש.עוצמת החשמל'),
        ('שתית הנדסה בע"מ'),
        ('א.מולין בע"מ'),
        ('כמאל עתמנאה'),
        ('איהב נכאש'),
        ('הספל רועי'),
        ('א.א. נידל'),
        ('רמי עבודות חשמל ותקשורת'),
        ('עימאד כנעני'),
        ('הצבי קירור ומזוג אויר'),
        ('אביב אספקה טכנית'),
        ('תומר ברוש'),
        ('שאל ציוד טכני'),
        ('פזה אחרת'),
        ('חשמל הברק'),
        ('א.צום בע"מ'),
        ('עשר חשמל בע"מ'),
        ('דייב עתמנא'),
        ('הנדסת ספיקה'),
        ('גיא משאבות'),
        ('אל אי קבלנות'),
        ('מדן סחר'),
        ('ח.א.מערכות חשמל'),
        ('ע.י.הנדסת מים'),
        ('א.דגנים'),
        ('שלום גרבי'),
        ('שאל צפון - מערכת מים'),
        ('ח.ראמא'),
        ('זאב הורוביץ'),
        ('אור שי בע"מ'),
        ('סופר אלוני'),
        ('ב.מ.משאבות'),
        ('טיב אור'),
        ('אבו חרירי עמד'),
        ('רפי-ו.שיווק ואספקה'),
        ('לויק שירותי תאורה'),
        ('עמוס'),
        ('עירית תל אביב'),
        ('נר בקרה'),
        ('המניע משאבות'),
        ('אונליק'),
        ('וינברג אברהם'),
        ('מוזיאון המדע ירושליים'),
        ('המניע משאבות בע"מ'),
        ('זייד'),
        ('א.א.תשתיות עפר'),
        ('תדהר'),
        ('איסמעיל'),
        ('אבנר צדוק פלגים'),
        ('גרין ליין'),
        ('סואד נאטור'),
        ('חשמל מנשה'),
        ('חיים'),
        ('חשמל נעמן אדים'),
        ('ציון חודרה'),
        ('דוסטרה עבודות חשמל'),
        ('דניה סיבוס'),
        ('סליל המנוע'),
        ('חשמל לכל'),
        ('גיאו דניה'),
        ('עמר'),
        ('מאיר עבודות בנין ןתעשיה'),
        ('מכון וולקני'),
        ('חמדן עומר ס.ע.ר חשמל'),
        ('י.נ. עבודות חשמל נעם יוסף'),
        ('אלטק'),
        ('ש.רא.ל בע"מ'),
        ('מונטק מערכות בקרה'),
        ('נטול פדיל'),
        ('חשמל אבי'),
        ('ליימן עמית'),
        ('שמואל מור חיים'),
        ('ש.גוזמן ובניו'),
        ('אושרי'),
        ('א.אנרגית חשמל'),
        ('חשמל השחר'),
        ('ס.ר.י'),
        ('רמות יודאיקה יבוא יצוא'),
        ('יוניק מערכות'),
        ('רשף עבודות חשמל'),
        ('בן שגיא'),
        ('אברהם ששון'),
        ('אוריון'),
        ('ב.ק.ר פרויקטים בע"מ'),
        ('שון רון'),
        ('ש.א.ם'),
        ('שרעבי'),
        ('אבו ליל חשמל'),
        ('מרכז טכנולוגיות'),
        ('פדיל'),
        ('אשר בטיטו'),
        ('מחל משאבות'),
        ('י.ש חשמל בע"מ'),
        ('רון שמעון חשמל ותקשורת'),
        ('חשמל זאב'),
        ('גני בר'),
        ('מולכו קארין'),
        ('א.ש פרויקטים'),
        ('ויטלי לונגו'),
        ('השפלת מי תהום LDDWJ'),
        ('ערן לבני בע"מ'),
        ('פסקריו ושות-משאבות מים בע"מ'),
        ('שי זיגדון'),
        ('דודו מערכות ומשאבות מיים'),
        ('סקופ מתכות - המניע משאבות'),
        ('יניב קטן'),
        ('רונטל הנדסה'),
        ('יוסי לוי חשמל'),
        ('עדן סרש התקנות (מיכאל התקנות)'),
        ('ש.אל ציוד טכני בע"מ'),
        ('גרינפלד חיים משאבות'),
        ('אסטל מיזוג אויר'),
        ('אפקון בקרה'),
        ('זרם מיים בע"מ'),
        ('מאיר שירותי חשמל'),
        ('גלביט הנדסה בע"מ'),
        ('שיכון ובינוי סולל בונה'),
        ('אלקטרה ME'),
        ('נאור הנדסת חשמל'),
        ('אבי מזרחי'),
        ('א.ל. יזמות'),
        ('אלי רוסמן'),
        ('ליסוגורסקי גרגורי'),
        ('נווה רעיה (א.ז. 2006) בע"מ'),
        ('דור מערכות הנעה בע"מ'),
        ('בטא הנדסת חשמל'),
        ('א.ש. חשמל'),
        ('גרינקו אנרג''י בע"מ'),
        ('חן אזולאי שירותי חשמל'),
        ('א.ל. אראל הנדסת מיזוג אויר בע"מ'),
        ('משה א.ס חשמל'),
        ('מילניום קירור ומיזוג אויר בע"מ'),
        ('חליל יוסף בע"מ'),
        ('שרון בראון'),
        ('ח.ל.צ - חשמלאי לעת צרה'),
        ('כעין החשמל'),
        ('אקסייט ישראל פרוייקטים בעמ'),
        ('יניב עמר'),
        ('אלתן הנדסה אזרחית בעמ'),
        ('קונטאל אלקטרומכניקה בעמ'),
        ('שמדר הנדסה ובניין בע"מ'),
        ('אריאל גבאי'),
        ('דודו שירותי חשמל'),
        ('שהם משאבות ויפעת'),
        ('חברת הגיחון בע"מ'),
        ('קונטל אוטמציה ובקרה בע"מ'),
        ('חכימיאן דני - שירותי חשמל'),
        ('בית חולים הלל יפה'),
        ('אלדוחה מרקט שיווק מזון'),
        ('אלקטרה בע"מ'),
        ('איי.די.אי. טכנולוגיות בע"מ IDE'),
        ('קינג בירינג'),
        ('אמידן יצוא יבוא'),
        ('איתן הנדסת מים בע"מ'),
        ('שרות הוגן בע"מ'),
        ('נירלט צבעים בע"מ'),
        ('AMP'),
        ('שמואל מלמד'),
        ('מפטגון'),
        ('אשקריט'),
        ('דור משאבות'),
        ('סרגוסטים בע"מ'),
        ('נייטיב טק בעמ'),
        ('יוסיקור בע"מ'),
        ('אול אי ווטר בעמ'),
        ('אנלייט אנרגיה מתחדשת בע"מ'),
        ('הקוטב הצפוני פרוייקטים בע"מ'),
        ('א.ב תחזוקה ושיפוצים'),
        ('אסנת חברה לעבודות קבלניות בעמ'),
        ('א.ל הנדסת חשמל ותאורה'),
        ('נחושתן ג''ורג'' אהרון'),
        ('צ''יינה'),
        ('זרעים טכנולוגיות'),
        ('China rail way tunnel group co. ltd'),
        ('Bright source')
)
INSERT INTO clients (name, active)
SELECT DISTINCT trim(name), TRUE
FROM src
WHERE NOT EXISTS (SELECT 1 FROM clients c WHERE c.name = trim(src.name));

-- עובדים (רשימת שמות כפי שמופיעים במערך workers)
WITH workers_list(full_name) AS (
    VALUES
        ('מוהנד'),
        ('לידור'),
        ('ספיר'),
        ('מתן'),
        ('איציק'),
        ('ישראל'),
        ('אליהו'),
        ('עידו'),
        ('סמואל'),
        ('ליאוניד'),
        ('ניקולאי'),
        ('גרישה'),
        ('ראובן')
)
INSERT INTO employees (full_name)
SELECT full_name
FROM workers_list w
WHERE NOT EXISTS (SELECT 1 FROM employees e WHERE e.full_name = w.full_name);

-- רישום מיגרציה בטבלת schema_migrations (לא חובה)
INSERT INTO schema_migrations (filename)
SELECT '05_clients_workers_from_index2.sql'
WHERE NOT EXISTS (SELECT 1 FROM schema_migrations WHERE filename='05_clients_workers_from_index2.sql');
